<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
 
<body>
<div class="container"  th:fragment="content">
    <div th:if="${message != null}" class="alert alert-success" id="success-alert">
        <strong>Success!</strong> <span th:text="${message}"/>
    </div>
    <div th:if="${error != null}" class="alert alert-danger" id="failure-alert">
        <strong>Error!</strong> <span th:text="${error}"/>
    </div>
    <form id="viewVendorDetailsForm" th:action="@{/reset}" class="form-horizontal" method="post">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Vendor List &nbsp;&nbsp;&nbsp;&nbsp;
                    <button class="btn btn-primary" id="exportButton" type="submit">Export as CSV</button>
                    &nbsp;&nbsp;&nbsp;&nbsp;<label class="radio-inline"><input checked="checked" type="radio" value="1" name="filter"/>Show All</label>
                    &nbsp;&nbsp;&nbsp;&nbsp;<label class="radio-inline"><input type="radio" value="2" name="filter"/>Submitted</label>
                    &nbsp;&nbsp;&nbsp;&nbsp; <label class="radio-inline"><input type="radio" value="3" name="filter"/>Saved</label>
                </h3>
            </div>

            <div class="panel-body">
                <div class="row view-area">
                    <table id="dataTable" class="table table-hover table-striped table-bordered">
                        <thead class="thead-inverse">
                        <tr>
                            <th>Submitted (Y/N)</th>
                            <th>Vendor ID</th>
                            <th>Vendor Name</th>
                            <th>Telephone-Extn</th>
                            <th>Email</th>
                            <th>Address</th>
                            <th>Bank Account Holder Name</th>
                            <th>GST Number</th>
                            <th>Action</th>

                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="mItem : ${vendors}">
                            <td><label type="text"
                                       th:text="${mItem.submityn}" /></td>
                            <td><a th:href="@{'/get/{paramsKey}'(paramsKey=${mItem.vendorId})}"
                                   th:text="${mItem.vendorId}"/></td>
                            <td><label type="text"
                                       th:text="${mItem.vendorName1}" /></td>
                            <td><label type="text"
                                       th:text="${mItem.telephoneNumberExtn}" /></td>
                            <td><label type="text"
                                       th:text="${mItem.email}" /></td>
                            <td><label type="text"
                                       th:text="${mItem.address1}" /></td>
                            <td><label type="text"
                                       th:text="${mItem.accountHolderName}" /></td>
                            <td><label type="text"
                                       th:text="${mItem.gstNumber}" /></td>
                            <td>
                                <button th:attr="data-vendorId=${mItem.vendorId}" th:if="*{mItem.submityn == 'Y'}"
                                        type="submit" class="btn btn-primary resetButton">
                                    Reset To Edit
                                </button>
                            </td>

                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
        <input type="hidden" name="resetVendorId" id="resetVendorId"/>
    </form>

</div>


</body>
<script th:fragment="js">
$.fn.dataTable.ext.search.push(
    function (settings, data, dataIndex) {

        var selected = $('input[name=filter]:checked').val();
        var age = data[0];

        if (selected == '2') {
            return age == 'Y' ? true : false;
        }
        if (selected == '1') {
            return true;
        }
        if (selected == '3') {
            return age == 'N' ? true : false;
        }
    });

$(document).ready(function () {

    $('#dataTable').DataTable({
        "scrollY": 200
        , "scrollX": true
    });

    $('input:radio[name="filter"]').change(function () {
        var table = $('#dataTable').DataTable({
            retrieve: true
        });
        table.draw();
    });

    $("#success-alert").fadeTo(2000, 500).slideUp(500, function () {
        $("#success-alert").slideUp(500);
    });
    $("#failure-alert").fadeTo(2000, 500).slideUp(500, function () {
        $("#failure-alert").slideUp(500);
    });

    $('#viewVendorDetailsForm').on('click', '.resetButton', function () {
        var $row = $(this)
            , index = $row.attr('data-vendorid');

        $('#resetVendorId').val(index);

    });

    $('#viewVendorDetailsForm').on('click', '#exportButton', function () {
        alert('download');
        $('#viewVendorDetailsForm').attr('action', '/download');


    });
});
    </script>
</html>